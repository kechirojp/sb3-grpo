# **🚀 プロジェクト要約**

## **プロジェクト概要**

| カテゴリ | 詳細 |
| :---- | :---- |
| **プロジェクト名** | Hunyuan3D-2.1-CachedStart（OSSの利便性向上とDocker環境構築） |
| **役割** | AI/MLエンジニア 兼 DevOpsエンジニア |
| **期間** | 2025年6月～2025年7月（約半月） |
| **ミッション** | 優れた3D生成AIであるTencent Hunyuan3D-2.1を、より多くの開発者が手軽に利用できるよう、起動時の非効率性を解消し、環境構築を自動化すること。具体的には、起動のたびに発生する大規模な推論モデルのダウンロードを不要にし、Dockerを用いて迅速に利用開始できる環境を整備し、GitHub上で公開する。 |

---

## **リポジトリ**

**GitHub**  
[https://github.com/kechirojp/Hunyuan3D-2.1-CachedStart](https://github.com/kechirojp/Hunyuan3D-2.1-CachedStart)

**Docker Hub**  
[https://hub.docker.com/repository/docker/kechiro/hunyuan3d-2.1-cachedstart/general](https://hub.docker.com/repository/docker/kechiro/hunyuan3d-2.1-cachedstart/general)

**フォーク元**  
[https://github.com/Tencent-Hunyuan/Hunyuan3D-2.1](https://github.com/Tencent-Hunyuan/Hunyuan3D-2.1)

---

## **技術スタック**

### **コア技術**

* **AI/MLフレームワーク**: PyTorch, Diffusers, Transformers, HuggingFace Hub  
* **3Dアセット生成**: Hunyuan3D-2.1 Shape Generation, PBR Texture Synthesis  
* **コンテナ技術**: Docker, NVIDIA Container Toolkit  
* **環境最適化**: CUDA 12.4, Conda Environment Management  
* **Webフレームワーク**: Gradio, FastAPI

### **インフラ・環境**

* **開発環境**: Ubuntu 22.04, CUDA 12.4, Python 3.10, WSL2対応  
* **コンテナレジストリ**: Docker Hub  
* **バージョン管理**: Git/GitHub (Fork)  
* **実行管理**: Bash Scripts, PowerShell Scripts  
* **キャッシュシステム**: 永続ボリュームによるモデルキャッシュ管理

---

## **🎯 取り組んだ課題と解決策**

### **1\. モデルキャッシュの永続化による起動時間短縮**

**課題**: オリジナルのリポジトリでは、Web UIを起動するたびに約18GBの推論モデルがダウンロードされ、利用開始までに長い待ち時間が発生していた。  
**取り組み**: モデルを初回起動時にのみダウンロードし、指定したディレクトリ（model\_cache/）に永続的に保存するキャッシュ機構を実装。2回目以降の起動ではキャッシュされたモデルを直接読み込むように変更した。

| キャッシュ管理の実装 *\# start\_app.sh \- キャッシュディレクトリの自動設定と利用* *\#\!/bin/bash* *\# 1\. 永続化キャッシュディレクトリの指定* export HF\_HOME="/workspace/model\_cache/huggingface" export HY3DGEN\_MODELS="/workspace/model\_cache/hy3dgen" *\# ... 他キャッシュ関連の環境変数設定* *\# 2\. 起動時にキャッシュの存在を確認し、なければダウンロード、あれば再利用* *\# (HuggingFaceライブラリが環境変数に基づき自動で処理)* *\# 3\. アプリケーション起動* *\# WebUI（推奨）* ./start\_app.sh *\# → http://localhost:8080*  |
| :---- |

#### **改善結果**

* **起動時間の短縮**: 起動毎のダウンロードが不要になり、10分以上かかっていた起動時間を1分以内に短縮。  
* **ネットワーク負荷の軽減**: 2回目以降の起動ではネットワーク帯域を消費しない。  
* **利便性の向上**: コンテナを再起動しても、キャッシュが保持されるため、すぐに開発やテストを再開できる。

### **2\. Dockerによる環境構築の自動化と迅速化**

**課題**: AIモデルの利用には、Python、PyTorch、CUDA、その他多数のライブラリのバージョンを揃える必要があり、手動での環境構築は複雑で時間がかかっていた。  
**取り組み**: オリジナルのDockerfileをベースに、キャッシュ戦略とユーザビリティを大幅に改善した新しいDockerイメージを設計。docker run コマンド一つで、誰でも即座に最適化された環境を再現できるようにした。

#### **Dockerfileの改善点**

オリジナルのDockerfileと比較して、以下の点を主体的に改善した。

| *\# ベースイメージとしてCUDA環境を指定* FROM nvidia/cuda:12.4.1-devel-ubuntu22.04 *\# 1\. 自身の改善済みリポジトリをcloneするよう変更* RUN git clone https://github.com/kechirojp/Hunyuan3D-2.1-CachedStart.git WORKDIR /workspace/Hunyuan3D-2.1-CachedStart  *\# ... (依存関係のインストールはオリジナルを踏襲) ...* *\# 2\. モデルを永続化するためのキャッシュディレクトリを明示的に作成* RUN mkdir \-p /workspace/model\_cache/huggingface /workspace/model\_cache/hy3dgen  *\# 3\. Hugging Faceのキャッシュ保存先を永続化ディレクトリに指定* ENV HF\_HOME=/workspace/model\_cache/huggingface ENV HF\_MODULES\_CACHE=/workspace/model\_cache/huggingface/modules  *\# ... (カスタムコンポーネントのコンパイル) ...* *\# 4\. 起動時のコマンドをbashに変更し、利用者が操作を選べるように改善* CMD \["/bin/bash"\]  |
| :---- |

#### **改善結果**

* **環境構築の迅速化**: 開発者は数時間かかるセットアップ作業から解放され、数分でアプリケーションを起動できる。  
* **環境の再現性**: OSや個人の環境差異による「自分の環境では動かない」といった問題を解消。  
* **導入の容易化**: Docker Hubでビルド済みイメージを公開し、利用者がビルドする手間も省いた。

### **3\. 依存モデルの自動ダウンロードと永続化**

**課題**: メインの推論モデル以外にも、画像処理（RealESRGAN）などで別途手動ダウンロードが必要なモデルがあり、利用者に手間を強いていた。  
**取り組み**: 起動スクリプト内で、必要なモデルがキャッシュディレクトリに存在するかを確認し、存在しない場合のみ自動でダウンロードして配置する処理を追加した。

#### **自動ダウンロードの実装**

| *\# Enhanced features \- 依存モデルの自動ダウンロード処理* *\# RealESRGANモデルの存在を確認し、なければダウンロード* if \[ \! \-f "hy3dpaint/ckpt/RealESRGAN\_x4plus.pth" \]; then     echo "Downloading RealESRGAN model..."     wget https://github.com/xinntao/Real-ESRGAN/releases/download/v0.1.0/RealESRGAN\_x4plus.pth \\          \-P hy3dpaint/ckpt fi |
| :---- |

#### **改善結果**

* **手間の削減**: 利用者はどのモデルが別途必要かを意識することなく、アプリケーションを起動するだけで全ての依存関係が自動的に解決される。  
* **ユーザビリティの向上**: AIや環境構築に詳しくないユーザーでも、より簡単にツールを試せるようになった。

#### **内容**

* **ソースコードの公開**: [GitHub \- kechirojp/Hunyuan3D-2.1-CachedStart](https://github.com/kechirojp/Hunyuan3D-2.1-CachedStart)  
* **ビルド済みイメージの配布**: [Docker Hub \- kechiro/hunyuan3d-2.1-cachedstart](https://hub.docker.com/repository/docker/kechiro/hunyuan3d-2.1-cachedstart/general)  
* **ドキュメントの整備**: 英語と日本語で、改善点や導入手順を詳細に解説。

---

## **📊 定量的成果**

### **パフォーマンス・利便性の改善**

| メトリック | 改善前 | 改善後 |
| :---- | :---- | :---- |
| **初期起動時間** | 10-15分 | 1分以内 |
| **再起動時間** | 10-15分 | 30秒以内 |
| **ネットワーク使用量** | 毎回約18GB | 初回のみ約18GB |
| **環境構築の手間** | 数時間（手動） | 十数分（Docker利用） |

### **システム改善**

| 項目 | 改善内容 |
| :---- | :---- |
| **モデル管理** | 起動毎のダウンロードから、永続的なキャッシュ管理へ |
| **環境構築** | 手動セットアップから、Dockerによる自動化へ |
| **依存関係** | 手動ダウンロードから、起動時の自動ダウンロードへ |

---

## **🎨 プロジェクトで得られた知見**

### **1\. OSSの課題発見と改善の実践**

優れたオープンソースソフトウェアが持つ「ポテンシャル」と、一般の利用者が直面する「導入の壁」との間にあるギャップを特定し、具体的な技術（キャッシュ、Docker、自動化スクリプト）を用いてその壁を取り除くプロセスを経験した。利用者の視点に立ち、手間をいかに削減するかを考えることの重要性を学んだ。

### **2\. DockerによるAI開発環境のポータビリティ確保**

複雑な依存関係を持つAI開発環境において、Dockerがいかに強力なツールであるかを実感した。特に、CUDAのようなGPU環境を含むコンテナを適切に設定し、誰でも同じように動作する環境を配布することで、開発コミュニティ全体の生産性向上に貢献できることを学んだ。

### **3\. 自動化によるユーザー体験の向上**

モデルのダウンロードやパス設定など、手動で行うと間違いやすく時間のかかる作業をスクリプトで自動化することで、ユーザー体験が劇的に向上することを実践した。小さな改善の積み重ねが、プロジェクト全体の価値を高めることに繋がった。

---

## **📋 アペンディックス：開発者プロフィール**

### **👨‍💻 👨‍💻 開発者バックグラウンド**

* **氏名**:土倉　恵一郎（トクラ ケイイチロウ）   
* **経歴**: 株式会社スクウェア・エニックスにて、第一制作部・第二ビジネスディビジョンでアーティストとして従事。  
* **VR実績**: Steam世界3位・VR部門世界1位のランキング作品アートディレクター  
* **キャラクターデザイン実績**: デジモンSSRキャラクターデザイン（バンダイカードフェスタポスター採用※土倉以外のポスター採用キャラクター：悟空、ルフィー、ナルト）  
* **現職**: I/ML開発、アートディレクション、キャラクターデザイン、コンセプトアート制作、スクラムマスターなど、幅広い役割を担っています。  
* **専門領域**: アートディレクション、キャラクターデザイン、3Dグラフィックス、AI/ML、ゲーム開発、アジャイル開発

### **🏆 複合スキルセットの希少価値**

**大手ゲームスタジオで培ったアート制作能力、AI/ML技術、VR作品のディレクション経験、そしてアジャイル開発手法。これらの異なる分野のスキルと経験を掛け合わせることで、以下のような価値を提供します。**

1. **現場課題への深い理解:**  
    3D制作の現場が直面する課題を、自身の実体験に基づき深く理解しています。

2. **技術の実用化:**  
    専門的な技術を、現場で実際に活用できる商業的な価値へと転換させる構想力があります。

3. **領域横断的な開発力:**  
    アート、AI、プロジェクト管理といった異なる領域の知見を効果的に組み合わせ、新たな解決策を設計し、実装する能力があります。

---

**本技術実績書は、Hunyuan3D-2.1-CachedStartプロジェクトを通して、著名なオープンソースAIモデルが抱える実用上の課題を特定し、Docker、キャッシュ戦略、自動化スクリプトを用いて解決した経験をまとめたものです。AIモデルの利便性向上、開発環境の整備、そしてOSSコミュニティへの貢献といった経験として参考にしていただければと思います。**

